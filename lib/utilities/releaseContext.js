"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get default () {
        return _default;
    },
    get releaseContextFromDependency () {
        return releaseContextFromDependency;
    }
});
const _occamlanguages = require("occam-languages");
const _occamfilesystem = require("occam-file-system");
const _necessary = require("necessary");
const { loadProject } = _occamfilesystem.fileSystemUtilities, { concatenatePaths } = _necessary.pathUtilities, { readFile, isEntryFile, checkEntryExists } = _necessary.fileSystemUtilities, { releaseContextFromJSON, releaseContextFromProject } = _occamlanguages.releaseContextUtilities;
async function releaseContextFromDependency(dependency, context) {
    let releaseContext = null;
    const projectsDirectoryPath = process.cwd(), dependencyName = dependency.getName(), entryPath = concatenatePaths(projectsDirectoryPath, dependencyName), entryExists = checkEntryExists(entryPath);
    if (entryExists) {
        const entryFile = isEntryFile(entryPath);
        if (entryFile) {
            const filePath = entryPath, content = readFile(filePath), jsonString = content, json = JSON.parse(jsonString);
            releaseContext = releaseContextFromJSON(json, context);
        } else {
            const projectName = dependencyName, project = loadProject(projectName, projectsDirectoryPath);
            releaseContext = releaseContextFromProject(project, context);
        }
    }
    return releaseContext;
}
const _default = {
    releaseContextFromDependency
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvcmVsZWFzZUNvbnRleHQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IHJlbGVhc2VDb250ZXh0VXRpbGl0aWVzIH0gZnJvbSBcIm9jY2FtLWxhbmd1YWdlc1wiO1xuaW1wb3J0IHsgZmlsZVN5c3RlbVV0aWxpdGllcyBhcyBvY2NhbUZpbGVTeXN0ZW1VdGlsaXRpZXMgfSBmcm9tIFwib2NjYW0tZmlsZS1zeXN0ZW1cIjtcbmltcG9ydCB7IHBhdGhVdGlsaXRpZXMsIGZpbGVTeXN0ZW1VdGlsaXRpZXMgYXMgbmVjZXNzYXJ5RmlsZVN5c3RlbVV0aWxpdGllcyB9IGZyb20gXCJuZWNlc3NhcnlcIjtcblxuY29uc3QgeyBsb2FkUHJvamVjdCB9ID0gb2NjYW1GaWxlU3lzdGVtVXRpbGl0aWVzLFxuICAgICAgeyBjb25jYXRlbmF0ZVBhdGhzIH0gPSBwYXRoVXRpbGl0aWVzLFxuICAgICAgeyByZWFkRmlsZSwgaXNFbnRyeUZpbGUsIGNoZWNrRW50cnlFeGlzdHMgfSA9IG5lY2Vzc2FyeUZpbGVTeXN0ZW1VdGlsaXRpZXMsXG4gICAgICB7IHJlbGVhc2VDb250ZXh0RnJvbUpTT04sIHJlbGVhc2VDb250ZXh0RnJvbVByb2plY3QgfSA9IHJlbGVhc2VDb250ZXh0VXRpbGl0aWVzO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVsZWFzZUNvbnRleHRGcm9tRGVwZW5kZW5jeShkZXBlbmRlbmN5LCBjb250ZXh0KSB7XG4gIGxldCByZWxlYXNlQ29udGV4dCA9IG51bGw7XG5cbiAgY29uc3QgcHJvamVjdHNEaXJlY3RvcnlQYXRoID0gcHJvY2Vzcy5jd2QoKSwgLy8vXG4gICAgICAgIGRlcGVuZGVuY3lOYW1lID0gZGVwZW5kZW5jeS5nZXROYW1lKCksXG4gICAgICAgIGVudHJ5UGF0aCA9IGNvbmNhdGVuYXRlUGF0aHMocHJvamVjdHNEaXJlY3RvcnlQYXRoLCBkZXBlbmRlbmN5TmFtZSksXG4gICAgICAgIGVudHJ5RXhpc3RzID0gY2hlY2tFbnRyeUV4aXN0cyhlbnRyeVBhdGgpO1xuXG4gIGlmIChlbnRyeUV4aXN0cykge1xuICAgIGNvbnN0IGVudHJ5RmlsZSA9IGlzRW50cnlGaWxlKGVudHJ5UGF0aCk7XG5cbiAgICBpZiAoZW50cnlGaWxlKSB7XG4gICAgICBjb25zdCBmaWxlUGF0aCA9IGVudHJ5UGF0aCwgLy8vXG4gICAgICAgICAgICBjb250ZW50ID0gcmVhZEZpbGUoZmlsZVBhdGgpLFxuICAgICAgICAgICAganNvblN0cmluZyA9IGNvbnRlbnQsIC8vL1xuICAgICAgICAgICAganNvbiA9IEpTT04ucGFyc2UoanNvblN0cmluZyk7XG5cbiAgICAgIHJlbGVhc2VDb250ZXh0ID0gcmVsZWFzZUNvbnRleHRGcm9tSlNPTihqc29uLCBjb250ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcHJvamVjdE5hbWUgPSBkZXBlbmRlbmN5TmFtZSwgLy8vXG4gICAgICAgICAgICBwcm9qZWN0ID0gbG9hZFByb2plY3QocHJvamVjdE5hbWUsIHByb2plY3RzRGlyZWN0b3J5UGF0aCk7XG5cbiAgICAgIHJlbGVhc2VDb250ZXh0ID0gcmVsZWFzZUNvbnRleHRGcm9tUHJvamVjdChwcm9qZWN0LCBjb250ZXh0KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVsZWFzZUNvbnRleHQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgcmVsZWFzZUNvbnRleHRGcm9tRGVwZW5kZW5jeVxufTtcbiJdLCJuYW1lcyI6WyJyZWxlYXNlQ29udGV4dEZyb21EZXBlbmRlbmN5IiwibG9hZFByb2plY3QiLCJvY2NhbUZpbGVTeXN0ZW1VdGlsaXRpZXMiLCJjb25jYXRlbmF0ZVBhdGhzIiwicGF0aFV0aWxpdGllcyIsInJlYWRGaWxlIiwiaXNFbnRyeUZpbGUiLCJjaGVja0VudHJ5RXhpc3RzIiwibmVjZXNzYXJ5RmlsZVN5c3RlbVV0aWxpdGllcyIsInJlbGVhc2VDb250ZXh0RnJvbUpTT04iLCJyZWxlYXNlQ29udGV4dEZyb21Qcm9qZWN0IiwicmVsZWFzZUNvbnRleHRVdGlsaXRpZXMiLCJkZXBlbmRlbmN5IiwiY29udGV4dCIsInJlbGVhc2VDb250ZXh0IiwicHJvamVjdHNEaXJlY3RvcnlQYXRoIiwicHJvY2VzcyIsImN3ZCIsImRlcGVuZGVuY3lOYW1lIiwiZ2V0TmFtZSIsImVudHJ5UGF0aCIsImVudHJ5RXhpc3RzIiwiZW50cnlGaWxlIiwiZmlsZVBhdGgiLCJjb250ZW50IiwianNvblN0cmluZyIsImpzb24iLCJKU09OIiwicGFyc2UiLCJwcm9qZWN0TmFtZSIsInByb2plY3QiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7OztRQXdDQTtlQUFBOztRQTdCc0JBO2VBQUFBOzs7Z0NBVGtCO2lDQUN3QjsyQkFDbUI7QUFFbkYsTUFBTSxFQUFFQyxXQUFXLEVBQUUsR0FBR0Msb0NBQXdCLEVBQzFDLEVBQUVDLGdCQUFnQixFQUFFLEdBQUdDLHdCQUFhLEVBQ3BDLEVBQUVDLFFBQVEsRUFBRUMsV0FBVyxFQUFFQyxnQkFBZ0IsRUFBRSxHQUFHQyw4QkFBNEIsRUFDMUUsRUFBRUMsc0JBQXNCLEVBQUVDLHlCQUF5QixFQUFFLEdBQUdDLHVDQUF1QjtBQUU5RSxlQUFlWCw2QkFBNkJZLFVBQVUsRUFBRUMsT0FBTztJQUNwRSxJQUFJQyxpQkFBaUI7SUFFckIsTUFBTUMsd0JBQXdCQyxRQUFRQyxHQUFHLElBQ25DQyxpQkFBaUJOLFdBQVdPLE9BQU8sSUFDbkNDLFlBQVlqQixpQkFBaUJZLHVCQUF1QkcsaUJBQ3BERyxjQUFjZCxpQkFBaUJhO0lBRXJDLElBQUlDLGFBQWE7UUFDZixNQUFNQyxZQUFZaEIsWUFBWWM7UUFFOUIsSUFBSUUsV0FBVztZQUNiLE1BQU1DLFdBQVdILFdBQ1hJLFVBQVVuQixTQUFTa0IsV0FDbkJFLGFBQWFELFNBQ2JFLE9BQU9DLEtBQUtDLEtBQUssQ0FBQ0g7WUFFeEJYLGlCQUFpQkwsdUJBQXVCaUIsTUFBTWI7UUFDaEQsT0FBTztZQUNMLE1BQU1nQixjQUFjWCxnQkFDZFksVUFBVTdCLFlBQVk0QixhQUFhZDtZQUV6Q0QsaUJBQWlCSiwwQkFBMEJvQixTQUFTakI7UUFDdEQ7SUFDRjtJQUVBLE9BQU9DO0FBQ1Q7TUFFQSxXQUFlO0lBQ2JkO0FBQ0YifQ==